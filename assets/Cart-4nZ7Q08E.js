import{r,C as b,u as N,j as t,L as w,V as c}from"./index-DIpdVh_D.js";import{H as y}from"./Helmet-DZ8jQvgh.js";const E=()=>{let[C,v]=r.useState(0),{numOfCartItems:i,totalPrice:x,products:l,updateCart:d,deleteCart:o,clearCart:f}=r.useContext(b);const m=N();async function u(e,s){(await d(e,s)).data.status==="success"?c.success("Product Updated"):c.error("error....")}async function j(e){(await o(e)).data.status==="success"?(c.success("Product Deleted"),m("/")):c.error("error....")}async function g(){var s;let e=await f();console.log(e),((s=e==null?void 0:e.data)==null?void 0:s.message)==="success"?(c.success("Product cleared"),m("/")):c.error("error....")}return r.useEffect(()=>{},[]),t.jsxs(t.Fragment,{children:[t.jsx(y,{children:t.jsx("title",{children:"Cart Page"})}),(l==null?void 0:l.length)>0?t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl pb-3 text-green-500",children:["Num Of Cart Items : ",i]}),t.jsxs("h3",{className:"text-xl",children:["Total Price : ",x," EGP"]}),t.jsxs("div",{className:"relative pt-10 overflow-x-auto shadow-md sm:rounded-lg",children:[t.jsx("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:t.jsx("tbody",{children:l==null?void 0:l.map(e=>{var s,n,h;return t.jsx("tr",{className:"bg-white border-b",children:t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsx("div",{className:"flex items-center gap-4",children:t.jsx("img",{src:(s=e==null?void 0:e.product)==null?void 0:s.imageCover,className:"w-70 m-auto md:w-50 max-w-full max-h-full",alt:"Product"})}),t.jsx("span",{className:"font-semibold text-center pb-5 text-gray-600",children:(n=e==null?void 0:e.product)==null?void 0:n.title}),t.jsxs("div",{className:"flex items-center justify-between md:justify-end flex-wrap gap-2 mt-2 md:mt-0",children:[t.jsx("button",{onClick:()=>{var a;return u((a=e==null?void 0:e.product)==null?void 0:a._id,(e==null?void 0:e.count)-1)},className:"inline-flex items-center justify-center p-1 text-sm font-medium h-6 w-6 text-green-500 bg-white border border-green-300 rounded-full hover:bg-gray-100",type:"button",children:t.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 18 2",children:t.jsx("path",{stroke:"currentColor",strokeWidth:2,d:"M1 1h16"})})}),t.jsx("span",{className:"w-10 text-center",children:e==null?void 0:e.count}),t.jsx("button",{onClick:()=>{var a;return u((a=e==null?void 0:e.product)==null?void 0:a._id,(e==null?void 0:e.count)+1)},className:"inline-flex items-center justify-center p-1 text-sm font-medium h-6 w-6 text-green-500 bg-white border border-green-300 rounded-full hover:bg-gray-100",type:"button",children:t.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 18 18",children:t.jsx("path",{stroke:"currentColor",strokeWidth:2,d:"M9 1v16M1 9h16"})})}),t.jsxs("span",{className:"font-semibold text-gray-700 px-2",children:[e==null?void 0:e.price," EGP"]}),t.jsxs("button",{onClick:()=>{var a;return j((a=e==null?void 0:e.product)==null?void 0:a._id)},className:"text-red-600 hover:underline text-sm",children:[t.jsx("i",{className:"fa-solid fa-trash me-1"})," Remove"]})]})]})})},(h=e==null?void 0:e.product)==null?void 0:h._id)})})}),t.jsx("div",{className:"flex justify-center my-4",children:t.jsx("button",{onClick:()=>{g()},className:"cursor-pointer  bg-green-500 rounded-md text-white py-2 px-4",children:"Clear all Cart"})}),t.jsx("div",{className:"flex justify-center my-4",children:t.jsx(w,{to:"/checkout",children:t.jsx("button",{className:" bg-green-500 rounded-md text-white py-2 px-6",children:"CheckOut"})})})]})]}):t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("h2",{className:"text-xl pb-3 text-green-500",children:["Num Of Cart Items : ",i]}),t.jsxs("h3",{className:"text-xl",children:["Total Price : ",x," EGP"]})]})]})};export{E as default};
